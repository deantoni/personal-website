import SEO from "../../src/components/seo.jsx";
import resume from "../../src/data/resume.yml";
import TimeDifference from "../../src/components/time-difference.jsx";
import TimePeriod from "../../src/components/time-period.jsx";
import Location from "../../src/components/location.jsx";

<SEO
  title="Resume"
  description="A page with information about my employment and education history"
/>

<Section py="8|12">
  <Container>
    <H1 m="0" fontWeight="extrabold" lineHeight="tight">
      Resume
    </H1>
    <H4 mt="10" fontWeight="extrabold" lineHeight="tight">
    <Flexbox>
      <Icon name="briefcase" size="10" mr="2" /> Employment
    </Flexbox>
    </H4>
    {resume &&
      resume
        .filter((r) => r.type === "company")
        .map((entry, entryIndex) => (
          <Div key={entryIndex}>
            <Grid
              col="1|1|350px 1fr|400px 1fr"
              gap="10|20"
              mt="10"
              alignItems="flex-start"
            >
              <Flexbox flexDirection="column" alignItems="null|null|flex-end">
                <Div fontSize="lg" fontWeight="bold">
                  {entry.name}
                </Div>
                <Div>
                  <TimeDifference periods={entry.items} opacity="0.50"/>
                </Div>
              </Flexbox>
              <Div>
                {entry.items &&
                  entry.items.map((item, itemIndex) => (
                    <Div key={itemIndex} position="relative" sx={{
                        "::before": {
                          content: '""',
                          position: 'absolute',
                          top: 1,
                          left: "-2.55rem",
                          width: "1px",
                          borderLeft: "1px dashed",
                          boderColor: 'text',
                          opacity: 0.12,
                          height: "calc(100% + 1rem)",
                        },
                      }}>
                      <Div fontSize="lg" position="relative" sx={{
                        "::before": {
                          content: '""',
                          position: 'absolute',
                          top: "5px",
                          left: -12,
                          width: 4,
                          height: 4,
                          borderRadius: 4,
                          opacity: entryIndex === 0 ? 1 : 0.75,
                          backgroundColor: 'primary',
                        }
                      }}>
                        {item.title}
                      </Div>
                      <TimePeriod start={item.start} end={item.end} opacity="0.50" fontSize="sm" mt="0.5" />
                      <Location location={item.location} opacity="0.50" fontSize="sm" mt="0.5" />
                      <Div fontSize="md" mt="2">{item.blurb}</Div>
                      <Ul>
                        {item.subItems &&
                          item.subItems.map((subItem, subItemIndex) => (
                            <Li key={subItemIndex} fontSize="md" lineHeight="relaxed">
                              {subItem}
                            </Li>
                          ))}
                      </Ul>
                    </Div>
                  ))}
              </Div>
            </Grid>
          </Div>
        ))}
        <H4 mt="10" fontWeight="extrabold" lineHeight="tight">
      <Flexbox>
        <Icon name="book-open" size="10" mr="2" /> Education
      </Flexbox>
    </H4>
                  {resume &&
              resume
                .filter((r) => r.type === "school")
                .map((entry, entryIndex) => (
    <Grid key={entryIndex}
              col="1|1|350px 1fr|400px 1fr"
              gap="10|20"
              mt="10"
              alignItems="flex-start"
            >
            <Div fontSize="lg" fontWeight="bold" textAlign="left|left|right">{entry.name}</Div>
            <Div>
              <Div fontSize="lg">{entry.degree}</Div>
              <TimePeriod start={entry.start} end={entry.end} opacity="0.50" fontSize="sm" mt="0.5" />
              <Location location={entry.location} opacity="0.50" fontSize="sm" mt="0.5" />
              <Div fontSize="md" mt="2">{entry.field}</Div>
              {entry.publications &&
              entry.publications
                .map((publication, publicationIndex) => (
                  <Link key={publicationIndex} href={publication.link} mt="2" fontSize="md">
                    {publication.name}
                  </Link>
                ))}
            </Div>
    </Grid>
    ))}
    <H4 mt="10" fontWeight="extrabold" lineHeight="tight">
      <Flexbox>
        <Icon name="award" size="10" mr="2" /> Certifications
      </Flexbox>
    </H4>
                  {resume &&
              resume
                .filter((r) => r.type === "certification")
                .map((entry, entryIndex) => (
    <Grid key={entryIndex}
              col="1|1|350px 1fr|400px 1fr"
              gap="10|20"
              mt="10"
              alignItems="flex-start"
            >
            <Div fontSize="lg" fontWeight="bold" textAlign="left|left|right">{entry.entity}</Div>
            <Div>
              <Div fontSize="lg">{entry.name}</Div>
              <TimePeriod start={entry.start} end={entry.end} opacity="0.50" fontSize="sm" mt="0.5" />
            </Div>
    </Grid>
    ))}

  </Container>
</Section>
